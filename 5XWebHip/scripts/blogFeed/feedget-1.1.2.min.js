(function(n,t){n.fn.feedget=function(i){var r=function(){function i(i){return i&&typeof i=="string"&&(i=i.replace(/<script[^>]*>([\S\s]*?)<\/script>/gmi,""),i=i.replace(/<\/?\w(?:[^"'>]|"[^"]*"|'[^']*')*>/gmi,""),n.innerHTML=i,n.textContent===t?(i=n.innerText,n.innerText=""):(i=n.textContent,n.textContent="")),i}var n=document.createElement("div");return i}(),l=function(n,t){var i=n.getUTCDate(),r=n.getMonth()+1,u=n.getFullYear(),f=n.getHours(),e=n.getMinutes(),o=n.getSeconds();t.year=(u.toString().length==1?"0":"")+u;t.month=(r.toString().length==1?"0":"")+r;t.day=(i.toString().length==1?"0":"")+i;t.hours=(f.toString().length==1?"0":"")+f;t.minutes=(e.toString().length==1?"0":"")+e;t.seconds=(o.toString().length==1?"0":"")+o},a=function(t){try{var i=n("<div>"+t+"<\/div>").find("img").first();return n(i).length==0?"":n(i).attr("src")}catch(r){return""}},v=function(t,i,r){var s,o;if(!r){var u=i.find(".feedget-elements-container"),h=i.find(".feedget-body-container"),f=0;switch(t){case"up":case"left":f=parseInt(n(u).attr("data-current-element-id"))-1;break;case"down":case"right":f=parseInt(n(u).attr("data-current-element-id"))+1}s=i.find(".feedget-element[data-element-id="+f+"]");r=!0;o={};t=="up"||t=="down"?o={scrollTop:s.position().top-parseInt(u.css("padding-top"))}:(t=="left"||t=="right")&&(o={scrollLeft:s.position().left-parseInt(u.css("padding-left"))});h.animate(o,300,function(){e(i);r=!1});u.attr("data-current-element-id",f)}},e=function(i){var u,f,e;if(i!==t){var o=i.attr("id"),r=i.find(".feedget-body-container"),h=r.find(".feedget-elements-container"),s=n("#"+o+" .up.arrow");r.scrollTop()>0?s.button({disabled:!1}):s.hasClass("ui-button-disabled.ui-state-disabled")||(s.removeClass("ui-state-hover"),s.button({disabled:!0}));u=n("#"+o+" .down.arrow");h.outerHeight(!0)-r.scrollTop()>r.outerHeight(!0)?u.button({disabled:!1}):u.hasClass("ui-button-disabled.ui-state-disabled")||(u.removeClass("ui-state-hover"),u.button({disabled:!0}));f=n("#"+o+" .left.arrow");r.scrollLeft()>0?f.button({disabled:!1}):f.hasClass("ui-button-disabled.ui-state-disabled")||(f.removeClass("ui-state-hover"),f.button({disabled:!0}));e=n("#"+o+" .right.arrow");h.outerWidth(!0)-r.scrollLeft()>r.outerWidth(!0)?e.button({disabled:!1}):e.hasClass("ui-button-disabled.ui-state-disabled")||(e.removeClass("ui-state-hover"),e.button({disabled:!0}))}},i=n.extend({direction:"vertical",entries:10,images:!0,fulltext:!1,buttons:!0,facebook:!0,twitter:!0,reverse:!1,title:"",description:"",showHeader:!0},i),o=this,s=!1,h=!1,f,u,c;typeof jQuery.ui!="undefined"&&/[1-9]\.[7-9].[1-9]/.test(n.ui.version)&&(h=!0);o.each(function(){n(this).css("text-align","center");var t=n("<img>").addClass("feedget-loading").attr("src",i.loadingImg).appendTo(n(this))});f=Date.parse(new Date);u=i.feed;u+=i.feed.indexOf("?")==-1?"?x="+f:"&x="+f;u=i.feed;c="http://ajax.googleapis.com/ajax/services/feed/load?v=1.0&callback=?&num="+i.entries+"&q="+encodeURIComponent(u);n.getJSON(c,function(u){o.each(function(f){var o=n(this),y=o.attr("id"),rt,w,d,g,c,p,ut,ft,et,ot,nt,it,tt,b,k,st;if(o.attr("id")===t&&(rt="feedget"+f,o.attr("id",rt)),y=o.attr("id"),n(document).off("click","#"+y+" .arrow"),o.empty(),o.addClass("feedget-container").addClass(i.direction).addClass("ui-widget").css("overflow","hidden").css("position","relative"),o.find(".feedget-loading").hide(),u.responseData==null)return errorEl=n("<span>").addClass("feedget-error").text(u.responseDetails).appendTo(o),!1;i.showHeader&&(w=n("<div>").addClass("feedget-header-container").addClass("ui-widget-header"),o.prepend(w),d=n("<div>").addClass("feedget-header-title"),i.title==""?n(d).text(r(u.responseData.feed.title)):n(d).text(i.title),n(d).appendTo(w),g=n("<div>").addClass("feedget-header-description"),i.description==""?n(g).text(r(u.responseData.feed.description)):n(g).text(i.description),n(g).appendTo(w));c=n("<div>").addClass("feedget-body-container").addClass("ui-widget-content");p=n("<div>").addClass("feedget-elements-container").css("position","relative").attr("data-current-element-id","0");c.append(p);i.direction=="horizontal"?(c.css("overflow-x","auto"),c.css("overflow-y","hidden")):(c.css("overflow-y","auto"),c.css("overflow-x","hidden"));n.each(u.responseData.feed.entries,function(t){var w=r(u.responseData.feed.entries[t].title),e=u.responseData.feed.entries[t].link,b=new Date(u.responseData.feed.entries[t].publishedDate),k=r(u.responseData.feed.entries[t].contentSnippet),d=r(u.responseData.feed.entries[t].content),g=i.fulltext?d:k,o={year:"",month:"",day:"",hours:"",minutes:"",seconds:""},f,s,h,tt,c,it,rt;l(b,o);f=i.reverse?n("<div>").prependTo(p).addClass("feedget-element").attr("data-element-id",t):n("<div>").appendTo(p).addClass("feedget-element").attr("data-element-id",t);s=n("<div>").addClass("feedget-element-header");s.appendTo(f);var v=n("<span>").addClass("feedget-element-title"),ut=n("<a>").attr("href",e).attr("target","_blank").text(w).appendTo(v),nt=n("<span>").addClass("feedget-element-date").text(o.year+"/"+o.month+"/"+o.day);s.append(v).append(nt);i.images&&(h=a(u.responseData.feed.entries[t].content),h!=""&&(tt=n("<img>").attr("src",h).removeAttr("height").removeAttr("width").addClass("feedget-element-image").appendTo(f)));var ft=n("<span>").addClass("feedget-element-text").text(g).appendTo(f),y=n("<div>").addClass("feedget-element-readme"),et=n("<a>").attr("href",e).attr("target","_blank").addClass("feedget-element-readme-link").text("[read more]").appendTo(y);y.appendTo(f);(i.facebook||i.twitter)&&(c=n("<div>").addClass("feedget-element-social").appendTo(f),i.facebook&&(it=n("<div>").addClass("feedget-element-facebook").html('<iframe src="//www.facebook.com/plugins/like.php?href='+e+'&amp;send=false&amp;layout=button_count&amp;width=100&amp;show_faces=false&amp;action=like&amp;colorscheme=light&amp;font&amp;height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:100px; height:21px;" allowtransparency="true"><\/iframe>').appendTo(c)),i.twitter&&(rt=n("<div>").addClass("feedget-element-twitter").html('<a href="https://twitter.com/share" class="twitter-share-button" data-width="1" data-url="'+e+'">Tweet<\/a><script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");<\/script>').appendTo(c)))});o.append(c);h&&i.buttons&&i.showHeader&&(i.direction=="vertical"?(ut=n("<div>").addClass(y+" up arrow").attr("data-direction","up").button({disabled:!0,text:!1,icons:{primary:"ui-icon-carat-1-n"}}),ft=n("<div>").addClass(y+" down arrow").attr("data-direction","down").button({text:!1,icons:{primary:"ui-icon-carat-1-s"}}),w.append(ut).append(ft)):(et=n("<div>").addClass(y+" left arrow").attr("data-direction","left").button({disabled:!0,text:!1,icons:{primary:"ui-icon-carat-1-w"}}),ot=n("<div>").addClass(y+" right arrow").attr("data-direction","right").button({text:!1,icons:{primary:"ui-icon-carat-1-e"}}),w.append(et).append(ot)));i.direction=="horizontal"?(nt=u.responseData.feed.entries.length*o.find(".feedget-element").outerWidth(!0),p.width(nt),it=o.find(".feedget-element").outerHeight(!0)-o.find(".feedget-element").height(),tt=i.showHeader?o.innerHeight()-w.outerHeight(!0):o.innerHeight(),nt<o.width()&&(nt=o.width()),b=parseInt(p.css("padding-top")),k=parseInt(p.css("padding-top")),c.height(parseInt(tt-2*parseFloat(c.css("borderTopWidth")))),p.width()>o.width()?(p.height(c[0].clientHeight-b-k),o.find(".feedget-element").height(c[0].clientHeight-b-k-it)):(i.buttons&&n("#"+y+" .arrow").button({disabled:!0}),p.height(tt-b-k),o.find(".feedget-element").height(tt-b-k-it))):(st=o.width(),p.height()>o.height()||i.buttons&&(n("#"+y+" .arrow").css("opacity","0.2"),n(document).off("click","#"+y+" .arrow")),i.showHeader?c.height(parseInt(o.height()-w.outerHeight(!0)-2*parseFloat(c.css("borderTopWidth")))):c.height(parseInt(o.height()-2*parseFloat(c.css("borderTopWidth")))));i.twitter&&n.getScript("http://platform.twitter.com/widgets.js",function(){twttr.widgets.load()});n(document).on("click","#"+y+" .arrow",function(){v(n(this).data("direction"),o,s)});n("#"+y+" .feedget-body-container").scroll(function(){var u,f;if(!s){var t=n(this),h=t.find(".feedget-elements-container"),r=n("#"+y+" .feedget-element").filter(function(){return i.direction=="vertical"?n(this).offset().top>=t.offset().top&&n(this).offset().top<=t.offset().top+t.height():n(this).offset().left>=t.offset().left&&n(this).offset().left<=t.offset().left+t.width()});r.length&&(u=n(r).first(),f=u.data("element-id"),n("#"+y+" .feedget-elements-container").attr("data-current-element-id",f));e(o)}})})},"jsonp");n(document).on("mouseenter",".feedget-element",function(){n(this).siblings().each(function(){n(this).stop();n(this).animate({opacity:.2},200,function(){})})});n(document).on("mouseleave",".feedget-element",function(){n(this).siblings().each(function(){n(this).stop();n(this).animate({opacity:1},200,function(){})})});return this}})(jQuery);